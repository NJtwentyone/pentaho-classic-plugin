{"version":3,"file":"Suggestions.cjs","sources":["../../../../src/Forms/Suggestions/Suggestions.tsx"],"sourcesContent":["import React, {\n  forwardRef,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\n\nimport MuiPopper from \"@mui/material/Popper\";\nimport { useForkRef } from \"@mui/material/utils\";\n\nimport { HvBaseProps } from \"../../types/generic\";\nimport { setId } from \"../../utils/setId\";\nimport { HvListItem } from \"../../ListContainer\";\nimport {\n  HvClickOutsideEvent,\n  useClickOutside,\n} from \"../../hooks/useClickOutside\";\nimport { ExtractNames } from \"../../utils/classes\";\nimport { HvSelectionList } from \"../../SelectionList\";\n\nimport { staticClasses, useClasses } from \"./Suggestions.styles\";\nimport { HvFormElementContext } from \"../FormElement\";\n\nexport { staticClasses as suggestionsClasses };\n\nexport type HvSuggestionsClasses = ExtractNames<typeof useClasses>;\n\nexport interface HvSuggestion {\n  id?: string;\n  label: React.ReactNode;\n  value?: string;\n  disabled?: boolean;\n}\n\nexport interface HvSuggestionsProps extends HvBaseProps {\n  /** Whether suggestions is visible. */\n  expanded?: boolean;\n  /** The HTML element Suggestions attaches to. */\n  anchorEl?: HTMLElement | null;\n  /** Array of { id, label, ...others } values to display in the suggestion list */\n  suggestionValues?: HvSuggestion[] | null;\n  /** Function called when a suggestion is selected */\n  onSuggestionSelected?: (event: React.MouseEvent, value: HvSuggestion) => void;\n  /** Function called when suggestion list is closed */\n  onClose?: (event: HvClickOutsideEvent) => void;\n  /** A Jss Object used to override or extend the styles applied to the component. */\n  classes?: HvSuggestionsClasses;\n}\n\nexport const HvSuggestions = forwardRef((props: HvSuggestionsProps, extRef) => {\n  const {\n    id,\n    className,\n    classes: classesProp,\n    expanded = false,\n    anchorEl,\n    suggestionValues = [],\n    onClose,\n    onSuggestionSelected,\n    ...others\n  } = props;\n  const { classes, cx } = useClasses(classesProp);\n\n  const { elementId } = useContext(HvFormElementContext);\n  const localId = id ?? setId(elementId, \"suggestions\");\n\n  const ref = useRef<HTMLDivElement>(null);\n  const forkedRef = useForkRef(ref, extRef);\n\n  const [isOpen, setIsOpen] = useState(expanded);\n\n  useClickOutside(ref, (event) => {\n    setIsOpen(false);\n    onClose?.(event);\n  });\n\n  useEffect(() => {\n    setIsOpen(expanded);\n  }, [expanded]);\n\n  return (\n    <div\n      id={localId}\n      ref={forkedRef}\n      className={cx(classes.root, className)}\n      {...others}\n    >\n      <MuiPopper\n        open={isOpen}\n        disablePortal\n        anchorEl={anchorEl}\n        className={classes.popper}\n      >\n        <HvSelectionList\n          className={classes.list}\n          id={setId(localId, \"list\")}\n          onChange={onSuggestionSelected}\n        >\n          {suggestionValues?.map((item, i) => {\n            const itemKey = item.id || setId(\"item\", i);\n\n            return (\n              <HvListItem\n                key={itemKey}\n                value={item}\n                disabled={item.disabled || undefined}\n              >\n                {item.label}\n              </HvListItem>\n            );\n          })}\n        </HvSelectionList>\n      </MuiPopper>\n    </div>\n  );\n});\n"],"names":["forwardRef","useClasses","useContext","HvFormElementContext","setId","useRef","useForkRef","useState","useClickOutside","useEffect","jsx","MuiPopper","HvSelectionList","HvListItem"],"mappings":";;;;;;;;;;;;;;AAkDO,MAAM,gBAAgBA,MAAA,WAAW,CAAC,OAA2B,WAAW;AACvE,QAAA;AAAA,IACJ;AAAA,IACA;AAAA,IACA,SAAS;AAAA,IACT,WAAW;AAAA,IACX;AAAA,IACA,mBAAmB,CAAC;AAAA,IACpB;AAAA,IACA;AAAA,IACA,GAAG;AAAA,EACD,IAAA;AACJ,QAAM,EAAE,SAAS,GAAG,IAAIC,8BAAW,WAAW;AAE9C,QAAM,EAAE,UAAA,IAAcC,MAAA,WAAWC,mBAAoB,oBAAA;AACrD,QAAM,UAAU,MAAMC,MAAM,MAAA,WAAW,aAAa;AAE9C,QAAA,MAAMC,aAAuB,IAAI;AACjC,QAAA,YAAYC,MAAAA,WAAW,KAAK,MAAM;AAExC,QAAM,CAAC,QAAQ,SAAS,IAAIC,eAAS,QAAQ;AAE7BC,kCAAA,KAAK,CAAC,UAAU;AAC9B,cAAU,KAAK;AACf,cAAU,KAAK;AAAA,EAAA,CAChB;AAEDC,QAAAA,UAAU,MAAM;AACd,cAAU,QAAQ;AAAA,EAAA,GACjB,CAAC,QAAQ,CAAC;AAGX,SAAAC,2BAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,IAAI;AAAA,MACJ,KAAK;AAAA,MACL,WAAW,GAAG,QAAQ,MAAM,SAAS;AAAA,MACpC,GAAG;AAAA,MAEJ,UAAAA,2BAAA;AAAA,QAACC,mBAAA;AAAA,QAAA;AAAA,UACC,MAAM;AAAA,UACN,eAAa;AAAA,UACb;AAAA,UACA,WAAW,QAAQ;AAAA,UAEnB,UAAAD,2BAAA;AAAA,YAACE,cAAA;AAAA,YAAA;AAAA,cACC,WAAW,QAAQ;AAAA,cACnB,IAAIR,MAAAA,MAAM,SAAS,MAAM;AAAA,cACzB,UAAU;AAAA,cAET,UAAkB,kBAAA,IAAI,CAAC,MAAM,MAAM;AAClC,sBAAM,UAAU,KAAK,MAAMA,MAAAA,MAAM,QAAQ,CAAC;AAGxC,uBAAAM,2BAAA;AAAA,kBAACG,SAAA;AAAA,kBAAA;AAAA,oBAEC,OAAO;AAAA,oBACP,UAAU,KAAK,YAAY;AAAA,oBAE1B,UAAK,KAAA;AAAA,kBAAA;AAAA,kBAJD;AAAA,gBAAA;AAAA,cAKP,CAEH;AAAA,YAAA;AAAA,UACH;AAAA,QAAA;AAAA,MACF;AAAA,IAAA;AAAA,EAAA;AAGN,CAAC;;;"}