{"version":3,"file":"useTreeViewInstanceEvents.cjs","sources":["../../../../../src/TreeView/internals/hooks/useTreeViewInstanceEvents.ts"],"sourcesContent":["import * as React from \"react\";\n\nimport { EventManager } from \"../utils/EventManager\";\nimport type { TreeViewPlugin } from \"../types\";\nimport type { TreeViewEventListener } from \"../types/events\";\nimport { UseTreeViewInstanceEventsSignature } from \"./useTreeViewInstanceEvents.types\";\nimport { populateInstance } from \"./utils\";\n\nconst isSyntheticEvent = (event: any): event is React.SyntheticEvent => {\n  return event.isPropagationStopped !== undefined;\n};\n\n/**\n * Plugin responsible for the registration of the nodes defined as JSX children of the TreeView.\n * When we will have both a SimpleTreeView using JSX children and a TreeView using a data prop,\n * this plugin will only be used by SimpleTreeView.\n */\nexport const useTreeViewInstanceEvents: TreeViewPlugin<\n  UseTreeViewInstanceEventsSignature\n> = ({ instance }) => {\n  const [eventManager] = React.useState(() => new EventManager());\n\n  const publishEvent = React.useCallback(\n    (...args: any[]) => {\n      const [name, params, event = {}] = args;\n      event.defaultMuiPrevented = false;\n\n      if (isSyntheticEvent(event) && event.isPropagationStopped()) {\n        return;\n      }\n\n      eventManager.emit(name, params, event);\n    },\n    [eventManager]\n  );\n\n  const subscribeEvent = React.useCallback(\n    (event: string, handler: TreeViewEventListener<any>) => {\n      eventManager.on(event, handler);\n      return () => {\n        eventManager.removeListener(event, handler);\n      };\n    },\n    [eventManager]\n  );\n\n  populateInstance<UseTreeViewInstanceEventsSignature>(instance, {\n    $$publishEvent: publishEvent,\n    $$subscribeEvent: subscribeEvent,\n  });\n};\n"],"names":["React","EventManager","populateInstance"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAQA,MAAM,mBAAmB,CAAC,UAA8C;AACtE,SAAO,MAAM,yBAAyB;AACxC;AAOO,MAAM,4BAET,CAAC,EAAE,eAAe;AACd,QAAA,CAAC,YAAY,IAAIA,iBAAM,SAAS,MAAM,IAAIC,2BAAc;AAE9D,QAAM,eAAeD,iBAAM;AAAA,IACzB,IAAI,SAAgB;AAClB,YAAM,CAAC,MAAM,QAAQ,QAAQ,CAAE,CAAA,IAAI;AACnC,YAAM,sBAAsB;AAE5B,UAAI,iBAAiB,KAAK,KAAK,MAAM,wBAAwB;AAC3D;AAAA,MACF;AAEa,mBAAA,KAAK,MAAM,QAAQ,KAAK;AAAA,IACvC;AAAA,IACA,CAAC,YAAY;AAAA,EAAA;AAGf,QAAM,iBAAiBA,iBAAM;AAAA,IAC3B,CAAC,OAAe,YAAwC;AACzC,mBAAA,GAAG,OAAO,OAAO;AAC9B,aAAO,MAAM;AACE,qBAAA,eAAe,OAAO,OAAO;AAAA,MAAA;AAAA,IAE9C;AAAA,IACA,CAAC,YAAY;AAAA,EAAA;AAGfE,QAAAA,iBAAqD,UAAU;AAAA,IAC7D,gBAAgB;AAAA,IAChB,kBAAkB;AAAA,EAAA,CACnB;AACH;;"}